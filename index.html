<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EyeSpark – Ignite Your Gaze</title>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DWT7HFBFK3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-DWT7HFBFK3');
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --apple-blue: #007AFF;
            --apple-blue-light: #E5F1FF;
            --apple-blue-transparent: rgba(0, 122, 255, 0.85);
            --apple-gray: #F2F2F7;
            --apple-dark-gray: #8E8E93;
            --apple-dark: #1D1D1F;
            --apple-card-bg: rgba(250, 250, 252, 0.8);
        }
        
        @keyframes breathe {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }
        
        .breathe {
            animation: breathe 2s infinite;
        }
        
        @keyframes breathe-subtle {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }
        
        .breathe-subtle {
            animation: breathe-subtle 3s infinite ease-in-out;
        }
        
        body {
            background-color: var(--apple-gray);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            color: var(--apple-dark);
        }
        
        .apple-blur {
            backdrop-filter: blur(20px);
            background-color: var(--apple-blue-transparent);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .training-area {
            border-radius: 24px;
            background: var(--apple-card-bg);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.05);
        }
        
        .apple-button {
            background: var(--apple-blue);
            border-radius: 12px;
            padding: 8px 16px;
            transition: all 0.3s ease;
            border: none;
            color: white;
            font-weight: 500;
        }
        
        .apple-button:hover {
            background: #0071EB;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
        }
        
        .apple-select {
            border-radius: 16px;
            padding: 6px 16px;
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .apple-card {
            border-radius: 20px;
            background: var(--apple-card-bg);
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.03);
        }
        
        .apple-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
        }
        
        /* 添加渐变背景效果 */
        .rest-gradient {
            background: linear-gradient(
                135deg,
                rgba(0, 122, 255, 0.05) 0%,
                rgba(0, 0, 0, 0.95) 100%
            );
        }
        
        /* 优化计时器显示 */
        #rest-timer {
            text-shadow: 0 0 20px rgba(0, 122, 255, 0.3);
        }
        
        /* 添加模糊效果的过渡 */
        .backdrop-blur-md {
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }
        
        /* 添加新的控制条样式 */
        .control-bar {
            background: var(--apple-card-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
            padding: 12px 20px;
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.03);
        }
        
        /* 添加统一的控件样式 */
        .control-element {
            display: flex;
            align-items: center;
            padding: 4px 10px;
            background: var(--apple-blue-light);
            border-radius: 8px;
            margin: 0 4px;
            border: 1px solid rgba(0, 122, 255, 0.1);
        }
        
        /* 计时器样式 */
        .timer-display {
            font-weight: 500;
            color: var(--apple-blue);
            letter-spacing: -0.5px;
        }
        
        /* 下拉菜单统一样式 */
        .clean-select {
            background: transparent;
            border: none;
            padding: 2px 6px;
            border-radius: 6px;
            font-size: 14px;
            color: var(--apple-dark);
            cursor: pointer;
            outline: none;
        }
        
        .clean-select:focus {
            background: rgba(0, 122, 255, 0.1);
        }
        
        /* 添加新样式 */
        .category-tab {
            background: var(--apple-card-bg);
            border-radius: 12px;
            padding: 10px 20px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }
        
        .category-tab.active {
            background: var(--apple-blue-light);
            color: var(--apple-blue);
            border-color: rgba(0, 122, 255, 0.2);
        }
        
        /* 优化计时器位置样式 */
        .timer-centered {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            padding: 15px 30px;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        /* 更新标题文字颜色 */
        .header-text {
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="min-h-screen bg-[#F2F2F7]">
    <!-- First Screen: Training Area -->
    <div id="training-screen" class="min-h-screen flex flex-col">
        <!-- Header - LOGO在左侧，标题居中 -->
        <header class="apple-blur sticky top-0 z-50 p-4">
            <div class="container mx-auto flex items-center justify-between">
                <!-- Logo on the left -->
                <div class="flex items-center">
                    <div class="text-2xl font-bold mr-2 text-white">✨</div>
                    <h1 class="text-xl font-bold header-text">EyeSpark</h1>
                </div>
                
                <!-- Title in center -->
                <h2 class="text-2xl font-bold header-text">Dynamic Ball Tracking Training</h2>
                
                <!-- Empty div for flex spacing -->
                <div class="w-28"></div>
            </div>
        </header>
        
        <!-- Introduction Section -->
        <div class="container mx-auto px-4 py-6 text-center">
            <div class="max-w-3xl mx-auto">
                <p class="text-[#1D1D1F] opacity-80 leading-relaxed text-lg">
                    Transform your gaze with EyeSpark's Dynamic Ball Tracking Training. 
                </p>
                <p class="text-[#1D1D1F] opacity-80 leading-relaxed text-lg mt-2">
                    Our scientifically designed exercises boost eye focus, enhance coordination, and reduce strain—helping you achieve a captivating, confident look for photos and everyday life.
                </p>
            </div>
        </div>

        <!-- Training Area -->
        <div class="container mx-auto flex-grow flex flex-col px-4 pb-6">
            <!-- 控制条 -->
            <div id="control-bar" class="control-bar flex items-center mb-6">
                <!-- Left: Set Counter -->
                <div class="w-1/3 flex justify-start">
                <div id="set-counter" class="control-element bg-[#E5F1FF]">
                    <span class="text-xs uppercase tracking-wide text-[#007AFF]/70 mr-2">Set</span>
                    <span class="text-[#007AFF] font-medium">1</span>
                    <span class="text-[#007AFF]/40 mx-1">/</span>
                    <span class="text-[#007AFF]/40">3</span>
                    </div>
                </div>

                <!-- Center: Timer -->
                <div class="w-1/3 flex justify-center">
                    <div id="timer" class="text-3xl font-medium text-[#007AFF]">30s</div>
                </div>
                
                <!-- Right: Controls -->
                <div class="w-1/3 flex justify-end">
                <div class="flex space-x-2">
                    <!-- Speed Control -->
                    <div class="control-element bg-[#E5F1FF]">
                        <span class="text-xs uppercase tracking-wide text-[#007AFF]/70 mr-2">Speed</span>
                        <select id="speed-control" class="clean-select text-[#1D1D1F]">
                            <option value="slow">Slow</option>
                            <option value="medium" selected>Medium</option>
                            <option value="fast">Fast</option>
                        </select>
                    </div>
                    
                    <!-- Pattern Control -->
                    <div class="control-element bg-[#E5F1FF]">
                        <span class="text-xs uppercase tracking-wide text-[#007AFF]/70 mr-2">Pattern</span>
                        <select id="pattern-control" class="clean-select text-[#1D1D1F]">
                            <option value="random" selected>Random</option>
                            <option value="infinity">Infinity</option>
                            <option value="circle">Circle</option>
                        </select>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Ball Movement Area -->
            <div id="training-area" class="training-area relative flex-grow mb-6">
                <!-- 小球 -->
                <div id="ball" class="absolute w-6 h-6 bg-[#007AFF] rounded-full shadow-lg transition-transform duration-200">
                    <div class="absolute inset-0 rounded-full bg-[#007AFF]/30 animate-pulse"></div>
                    </div>
                
                <!-- Rest Indicator -->
                <div id="rest-indicator" class="hidden absolute inset-0 bg-black/90 backdrop-blur-md rounded-2xl flex flex-col items-center justify-center text-white transition-all duration-500 ease-in-out">
                    <div class="transform transition-all duration-500 ease-in-out scale-100 text-center">
                        <!-- Timer with larger, more prominent display -->
                        <p id="rest-timer" class="text-7xl font-light text-[#007AFF] mb-6 tracking-tight">15</p>
                        
                        <!-- Simplified message with subtle animation -->
                        <p class="text-xl font-light tracking-wide breathe-subtle text-gray-200">
                            Blink and Relax
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- Instructions -->
            <div class="text-center text-[#8E8E93] text-sm tracking-wide font-light">
                <p>Track the ball with your eyes while keeping your head still</p>
            </div>
        </div>
    </div>
    
    <!-- Second Screen: Articles - 完全重构 -->
    <div id="articles-screen" class="min-h-screen bg-[#F2F2F7] py-12">
        <div class="container mx-auto px-4">
            <h2 class="text-2xl font-bold mb-8 text-center text-[#1D1D1F]">Eye Health Resources</h2>
            
            <!-- Category Tabs -->
            <div class="flex justify-center space-x-4 mb-10">
                <div class="category-tab active" data-category="nutrition">Eye Nutrition</div>
                <div class="category-tab" data-category="relaxation">Eye Relaxation</div>
            </div>
            
            <!-- Articles Container - Eye Nutrition -->
            <div id="nutrition-articles" class="article-category grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Article 1 -->
                <div class="apple-card p-6">
                    <h3 class="text-xl font-semibold mb-3 text-[#1D1D1F]">Colorful Foods for Eye Health</h3>
                    <p class="text-[#8E8E93] mb-4">Discover how colorful fruits and vegetables can naturally support your eye health...</p>
                    <a href="https://www.healthline.com/nutrition/8-nutrients-for-eyes" target="_blank" class="apple-button text-sm">Read More</a>
                </div>
                
                <!-- Article 2 -->
                <div class="apple-card p-6">
                    <h3 class="text-xl font-semibold mb-3 text-[#1D1D1F]">Screen Time and Vision</h3>
                    <p class="text-[#8E8E93] mb-4">Learn about the effects of digital devices on your eyes and how to protect them...</p>
                    <a href="https://en.wikipedia.org/wiki/Computer_vision_syndrome" target="_blank" class="apple-button text-sm">Read More</a>
                </div>
                
                <!-- Article 3 -->
                <div class="apple-card p-6">
                    <h3 class="text-xl font-semibold mb-3 text-[#1D1D1F]">Everyday Eye Care</h3>
                    <p class="text-[#8E8E93] mb-4">Simple daily habits to maintain healthy vision and prevent eye strain...</p>
                    <a href="https://en.wikipedia.org/wiki/Eye_care" target="_blank" class="apple-button text-sm">Read More</a>
                </div>
                
                <!-- Article 4 -->
                <div class="apple-card p-6">
                    <h3 class="text-xl font-semibold mb-3 text-[#1D1D1F]">Vitamins for Eye Health</h3>
                    <p class="text-[#8E8E93] mb-4">Natural sources of vitamins that support healthy vision...</p>
                    <a href="https://www.healthline.com/nutrition/eye-vitamins" target="_blank" class="apple-button text-sm">Read More</a>
                </div>
                
                <!-- Article 5 -->
                <div class="apple-card p-6">
                    <h3 class="text-xl font-semibold mb-3 text-[#1D1D1F]">Hydration and Eye Health</h3>
                    <p class="text-[#8E8E93] mb-4">How staying hydrated helps maintain comfortable vision...</p>
                    <a href="https://en.wikipedia.org/wiki/Dry_eye_syndrome#Prevention" target="_blank" class="apple-button text-sm">Read More</a>
                </div>
                
                <!-- Article 6 -->
                <div class="apple-card p-6">
                    <h3 class="text-xl font-semibold mb-3 text-[#1D1D1F]">Antioxidants for Vision</h3>
                    <p class="text-[#8E8E93] mb-4">Learn about foods rich in antioxidants that support eye health...</p>
                    <a href="https://www.healthline.com/nutrition/lutein-and-zeaxanthin" target="_blank" class="apple-button text-sm">Read More</a>
            </div>
                
                <!-- Article 7 -->
                <div class="apple-card p-6">
                    <h3 class="text-xl font-semibold mb-3 text-[#1D1D1F]">Healthy Snacks for Eyes</h3>
                    <p class="text-[#8E8E93] mb-4">Quick and easy snacks that can help maintain good vision...</p>
                    <a href="https://en.wikipedia.org/wiki/Eye_health#Diet_and_nutrition" target="_blank" class="apple-button text-sm">Read More</a>
                </div>
                
                <!-- Article 8 -->
                <div class="apple-card p-6">
                    <h3 class="text-xl font-semibold mb-3 text-[#1D1D1F]">Natural Vision Support</h3>
                    <p class="text-[#8E8E93] mb-4">Natural ways to support and maintain healthy vision...</p>
                    <a href="https://en.wikipedia.org/wiki/Eye_care#Prevention" target="_blank" class="apple-button text-sm">Read More</a>
            </div>
                
                <!-- Article 9 -->
                <div class="apple-card p-6">
                    <h3 class="text-xl font-semibold mb-3 text-[#1D1D1F]">Seasonal Foods for Eyes</h3>
                    <p class="text-[#8E8E93] mb-4">Best seasonal foods to support your eye health year-round...</p>
                    <a href="https://en.wikipedia.org/wiki/List_of_antioxidants_in_food" target="_blank" class="apple-button text-sm">Read More</a>
                </div>
            </div>
            
            <!-- Articles Container - Eye Relaxation -->
            <div id="relaxation-articles" class="article-category grid md:grid-cols-2 lg:grid-cols-3 gap-6 hidden">
                <!-- Article 1 -->
                <div class="apple-card p-6">
                    <h3 class="text-xl font-semibold mb-3 text-[#1D1D1F]">20-20-20 Rule Guide</h3>
                    <p class="text-[#8E8E93] mb-4">How to use the 20-20-20 rule to reduce digital eye strain...</p>
                    <a href="https://en.wikipedia.org/wiki/Computer_vision_syndrome#Prevention" target="_blank" class="apple-button text-sm">Read More</a>
                </div>
                
                <!-- Article 2 -->
                <div class="apple-card p-6">
                    <h3 class="text-xl font-semibold mb-3 text-[#1D1D1F]">Simple Eye Exercises</h3>
                    <p class="text-[#8E8E93] mb-4">Easy exercises to help relax and strengthen your eyes...</p>
                    <a href="https://en.wikipedia.org/wiki/Eye_exercise" target="_blank" class="apple-button text-sm">Read More</a>
                </div>
                
                <!-- Article 3 -->
                <div class="apple-card p-6">
                    <h3 class="text-xl font-semibold mb-3 text-[#1D1D1F]">Desk Setup Guide</h3>
                    <p class="text-[#8E8E93] mb-4">Optimize your workspace to prevent eye strain...</p>
                    <a href="https://en.wikipedia.org/wiki/Workspace#Ergonomics" target="_blank" class="apple-button text-sm">Read More</a>
                </div>
                
                <!-- Article 4 -->
                <div class="apple-card p-6">
                    <h3 class="text-xl font-semibold mb-3 text-[#1D1D1F]">Screen Break Activities</h3>
                    <p class="text-[#8E8E93] mb-4">Fun activities to give your eyes a break from screens...</p>
                    <a href="https://en.wikipedia.org/wiki/Computer_vision_syndrome#Management" target="_blank" class="apple-button text-sm">Read More</a>
                </div>
                
                <!-- Article 5 -->
                <div class="apple-card p-6">
                    <h3 class="text-xl font-semibold mb-3 text-[#1D1D1F]">Blue Light Guide</h3>
                    <p class="text-[#8E8E93] mb-4">Understanding and managing blue light exposure...</p>
                    <a href="https://en.wikipedia.org/wiki/Blue_light#Health_effects" target="_blank" class="apple-button text-sm">Read More</a>
                </div>
                
                <!-- Article 6 -->
                <div class="apple-card p-6">
                    <h3 class="text-xl font-semibold mb-3 text-[#1D1D1F]">Eye Yoga Basics</h3>
                    <p class="text-[#8E8E93] mb-4">Simple eye yoga exercises for daily practice...</p>
                    <a href="https://en.wikipedia.org/wiki/Eye_exercise#Types_of_exercises" target="_blank" class="apple-button text-sm">Read More</a>
                </div>
                
                <!-- Article 7 -->
                <div class="apple-card p-6">
                    <h3 class="text-xl font-semibold mb-3 text-[#1D1D1F]">Ergonomic Tips</h3>
                    <p class="text-[#8E8E93] mb-4">Create an eye-friendly workspace environment...</p>
                    <a href="https://en.wikipedia.org/wiki/Ergonomics#Visual_ergonomics" target="_blank" class="apple-button text-sm">Read More</a>
                </div>
                
                <!-- Article 8 -->
                <div class="apple-card p-6">
                    <h3 class="text-xl font-semibold mb-3 text-[#1D1D1F]">Natural Light Benefits</h3>
                    <p class="text-[#8E8E93] mb-4">How natural lighting helps maintain eye comfort...</p>
                    <a href="https://en.wikipedia.org/wiki/Daylighting#Health_and_comfort" target="_blank" class="apple-button text-sm">Read More</a>
                </div>
                
                <!-- Article 9 -->
                <div class="apple-card p-6">
                    <h3 class="text-xl font-semibold mb-3 text-[#1D1D1F]">Relaxation Techniques</h3>
                    <p class="text-[#8E8E93] mb-4">Simple methods to relax your eyes during the day...</p>
                    <a href="https://en.wikipedia.org/wiki/Eye_strain#Prevention" target="_blank" class="apple-button text-sm">Read More</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Category tabs functionality
            const categoryTabs = document.querySelectorAll('.category-tab');
            const articleCategories = document.querySelectorAll('.article-category');

            categoryTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs
                    categoryTabs.forEach(t => t.classList.remove('active'));
                    // Add active class to clicked tab
                    tab.classList.add('active');
                    
                    // Hide all article categories
                    articleCategories.forEach(category => category.classList.add('hidden'));
                    // Show selected category
                    const selectedCategory = document.getElementById(`${tab.dataset.category}-articles`);
                    if (selectedCategory) {
                        selectedCategory.classList.remove('hidden');
                    }
                });
            });

            // Get DOM elements
            const ball = document.getElementById('ball');
            const trainingArea = document.getElementById('training-area');
            const timerElement = document.getElementById('timer');
            const setCounterElement = document.getElementById('set-counter').querySelector('span');
            const restIndicator = document.getElementById('rest-indicator');
            const restTimerElement = document.getElementById('rest-timer');
            const speedControl = document.getElementById('speed-control');
            const patternControl = document.getElementById('pattern-control');
            
            // Article related elements
            const articleModal = document.getElementById('article-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalContent = document.getElementById('modal-content');
            const closeModalBtn = document.getElementById('close-modal');
            const readMoreButtons = document.querySelectorAll('.read-more');
            
            // Training parameters
            let currentSet = 1;
            const totalSets = 3;
            let trainingTime = 25; // Training time in seconds
            let restTime = 10; // Rest time in seconds
            let timeLeft = trainingTime;
            let isResting = false;
            let animationId = null;
            
            // Ball movement parameters
            let ballX = 50;
            let ballY = 50;
            let targetX, targetY;
            let speedMultiplier = 1; // Speed multiplier
            let currentPattern = 'random';
            let infinityT = 0; // Infinity pattern parameter
            let circleAngle = 0; // Circle pattern parameter
            
            // Initialize ball position
            updateBallPosition();
            
            // Set new target position
            setNewTarget();
            
            // Start training loop
            startTraining();
            
            // Speed control
            speedControl.addEventListener('change', function() {
                switch(this.value) {
                    case 'slow':
                        speedMultiplier = 0.5;
                        break;
                    case 'medium':
                        speedMultiplier = 1;
                        break;
                    case 'fast':
                        speedMultiplier = 2;
                        break;
                }
            });
            
            // Trajectory control
            patternControl.addEventListener('change', function() {
                currentPattern = this.value;
                // Reset parameters
                infinityT = 0;
                circleAngle = 0;
            });
            
            // Article modal related functionality
            readMoreButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const articleId = this.getAttribute('data-article');
                    openArticle(articleId);
                });
            });
            
            closeModalBtn.addEventListener('click', function() {
                articleModal.classList.add('hidden');
            });
            
            // Close modal when clicking outside
            articleModal.addEventListener('click', function(e) {
                if (e.target === articleModal) {
                    articleModal.classList.add('hidden');
                }
            });
            
            // Training related functions
            function startTraining() {
                // Start timer
                const timer = setInterval(() => {
                    if (isResting) {
                        timeLeft--;
                        restTimerElement.textContent = timeLeft;
                        
                        if (timeLeft <= 0) {
                            // End rest period
                            isResting = false;
                            restIndicator.classList.add('hidden');
                            timeLeft = trainingTime;
                            
                            // Check if all sets are completed
                            if (currentSet > totalSets) {
                                clearInterval(timer);
                                endTraining();
                                return;
                            }
                            
                            // Start next training set
                            moveBall();
                        }
                    } else {
                        timeLeft--;
                        timerElement.textContent = `${timeLeft}s`;
                        
                        if (timeLeft <= 0) {
                            // End training, start rest
                            isResting = true;
                            cancelAnimationFrame(animationId);
                            restIndicator.classList.remove('hidden');
                            timeLeft = restTime;
                            restTimerElement.textContent = timeLeft;
                            
                            // Update set counter
                            currentSet++;
                            setCounterElement.textContent = Math.min(currentSet, totalSets);
                        }
                    }
                }, 1000);
                
                // Start ball movement
                moveBall();
            }
            
            function moveBall() {
                // Cancel previous animation
                if (animationId) {
                    cancelAnimationFrame(animationId);
                }
                
                // Move ball based on selected pattern
                function animate() {
                    if (!isResting) {
                        switch (currentPattern) {
                            case 'random':
                                moveRandomly();
                                break;
                            case 'infinity':
                                moveInInfinityPattern();
                                break;
                            case 'circle':
                                moveInCirclePattern();
                                break;
                        }
                        updateBallPosition();
                        animationId = requestAnimationFrame(animate);
                    }
                }
                
                animate();
            }
            
            function moveRandomly() {
                // Set new target when ball gets close to current target
                const dx = targetX - ballX;
                const dy = targetY - ballY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < 2) {
                    setNewTarget();
                }
                
                // Move ball toward target
                ballX += dx * 0.05 * speedMultiplier;
                ballY += dy * 0.05 * speedMultiplier;
            }
            
            function moveInInfinityPattern() {
                // Infinity pattern movement
                const width = trainingArea.clientWidth - ball.clientWidth;
                const height = trainingArea.clientHeight - ball.clientHeight;
                const centerX = width / 2;
                const centerY = height / 2;
                
                infinityT += 0.01 * speedMultiplier;
                
                // Parametric equation: infinity shape
                ballX = centerX + (width / 3) * Math.sin(infinityT);
                ballY = centerY + (height / 4) * Math.sin(2 * infinityT);
            }
            
            function moveInCirclePattern() {
                // Circular movement
                const width = trainingArea.clientWidth - ball.clientWidth;
                const height = trainingArea.clientHeight - ball.clientHeight;
                const centerX = width / 2;
                const centerY = height / 2;
                const radius = Math.min(width, height) / 3;
                
                circleAngle += 0.02 * speedMultiplier;
                
                ballX = centerX + radius * Math.cos(circleAngle);
                ballY = centerY + radius * Math.sin(circleAngle);
            }
            
            function setNewTarget() {
                // Set random target position
                const width = trainingArea.clientWidth - ball.clientWidth;
                const height = trainingArea.clientHeight - ball.clientHeight;
                
                targetX = Math.random() * width;
                targetY = Math.random() * height;
            }
            
            function updateBallPosition() {
                // Update ball CSS position
                ball.style.left = `${ballX}px`;
                ball.style.top = `${ballY}px`;
            }
            
            function endTraining() {
                // Show completion message
                timerElement.innerHTML = '<span class="text-[#34C759]">Complete!</span>';
                
                // Create restart button and replace the right controls
                const controlBar = document.getElementById('control-bar');
                const rightControls = controlBar.querySelector('.flex.space-x-2');
                
                rightControls.innerHTML = ''; // Clear existing controls
                
                // Create and add the restart button
                const restartButton = document.createElement('button');
                restartButton.textContent = 'Start New Session';
                restartButton.className = 'mt-4 bg-[#34C759] text-white text-sm rounded-full py-2 px-4 hover:bg-opacity-90 transition-all';
                restartButton.addEventListener('click', function() {
                    location.reload();
                });
                
                rightControls.appendChild(restartButton);
            }
            
            // Article content function
            function openArticle(id) {
                const articles = {
                    "1": {
                        title: "The Science Behind Eye Movement",
                        content: `
                            <p>Our eyes are constantly at work, processing visual information from dawn to dusk. Like any other muscle in our body, the muscles surrounding our eyes need regular exercise to maintain their flexibility and functionality.</p>
                            
                            <h4>Why Eye Movement Matters</h4>
                            <ul>
                                <li>Strengthens eye muscles for better visual control</li>
                                <li>Reduces eye fatigue and dryness</li>
                                <li>Improves tracking ability for better reading and sports performance</li>
                                <li>Promotes better blood circulation around the eyes</li>
                            </ul>
                            
                            <p>Regular eye exercises can help reduce the symptoms of Computer Vision Syndrome. Just a few minutes daily can bring long-term benefits to your eye health.</p>
                        `
                    },
                    "2": {
                        title: "Digital Eye Strain Solutions",
                        content: `
                            <p>In today's digital age, our eyes face unprecedented challenges. The average person spends nearly 7 hours daily looking at screens, putting immense strain on our visual system.</p>
                            
                            <h4>Impact of Digital Devices</h4>
                            <p>Extended screen time can lead to:</p>
                            <ul>
                                <li>Eye dryness and irritation</li>
                                <li>Blurred vision</li>
                                <li>Headaches</li>
                                <li>Poor sleep quality (due to blue light exposure)</li>
                                <li>Increased risk of myopia</li>
                            </ul>
                            
                            <h4>Digital Wellness Strategies</h4>
                            <ul>
                                <li>Follow the 20-20-20 rule</li>
                                <li>Use blue light filters</li>
                                <li>Adjust screen brightness and contrast</li>
                                <li>Maintain proper viewing distance (20-28 inches)</li>
                                <li>Practice regular eye exercises</li>
                                <li>Remember to blink frequently</li>
                            </ul>
                        `
                    },
                    "3": {
                        title: "The 20-20-20 Rule",
                        content: `
                            <p>The 20-20-20 rule is a scientifically-backed method recommended by eye care professionals to reduce digital eye strain.</p>
                            
                            <h4>Understanding the Rule</h4>
                            <p>The rule is simple:</p>
                            <ul>
                                <li>Every <strong>20 minutes</strong> of screen time</li>
                                <li>Look at something <strong>20 feet</strong> away</li>
                                <li>For at least <strong>20 seconds</strong></li>
                            </ul>
                            
                            <h4>Why It Works</h4>
                            <p>Extended focus on close-up screens causes accommodative eye strain—keeping eye muscles in a constant state of tension. The 20-20-20 rule provides regular intervals for these muscles to relax and recover.</p>
                            
                            <h4>Implementation Tips</h4>
                            <ul>
                                <li>Set regular reminders</li>
                                <li>Use dedicated apps</li>
                                <li>Combine with stretch breaks</li>
                                <li>Look out a window when possible</li>
                            </ul>
                        `
                    }
                };
                
                modalTitle.textContent = articles[id].title;
                modalContent.innerHTML = articles[id].content;
                articleModal.classList.remove('hidden');
            }
        });
    </script>
</body>
</html> 
